<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Coercion between object formats • rgrass</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Coercion between object formats">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">rgrass</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.5-1</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/coerce.html">Coercion between object formats</a></li>
    <li><a class="dropdown-item" href="../articles/use.html">Use of GRASS interface</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/osgeo/rgrass/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Coercion between object formats</h1>
                        <h4 data-toc-skip class="author">Roger
Bivand</h4>
            
      
      <small class="dont-index">Source: <a href="https://github.com/osgeo/rgrass/blob/main/vignettes/coerce.Rmd" class="external-link"><code>vignettes/coerce.Rmd</code></a></small>
      <div class="d-none name"><code>coerce.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<p>The original R-GRASS interface <span class="citation">(R. S. Bivand
2000; Neteler and Mitasova 2008)</span> was designed to move raster and
later vector data between R and GRASS GIS. To do this, use was made of
intermediate files, often using the external GDAL library on both sides.
On the R side, the <strong>rgdal</strong> now archived package was used,
interfacing GDAL and PROJ as GRASS GIS also did. The GRASS commands
<code>r.in.gdal</code>, <code>r.out.gdal</code>, <code>v.in.ogr</code>
and <code>v.out.ogr</code> were matched by <strong>rgdal</strong>
functions using the same underlying external libraries:</p>
<p><img src="fig1.png" width="500"></p>
<p>GDAL was supplemented for raster data by simply reading and writing
uncompressed binary files using <code>r.in.bin</code> and
<code>r.out.bin</code>, with custom functions on the R side. As then
written, the R-GRASS interface used <strong>sp</strong> classes for both
raster and vector data, supplemented more recently with
<strong>sf</strong> classes for vector data only.</p>
<p>The current version of the R-GRASS interface has been simplified to
use the <strong>terra</strong> package because it, like
<strong>sf</strong> and <strong>rgdal</strong> before it, links to the
important external libraries. The workhorse driver is known as
<code>RRASTER</code>, and has been widely used in
<strong>raster</strong> and <strong>terra</strong> (see also (<a href="https://rspatial.org" class="external-link uri">https://rspatial.org</a>)). It
uses GDAL but writes a flat uncompressed binary file. Using
<code><a href="https://rspatial.github.io/terra/reference/rast.html" class="external-link">terra::rast()</a></code> also appears to preserve category names and
colour tables, but needs further testing (see (<a href="https://github.com/osgeo/rgrass/issues/42" class="external-link uri">https://github.com/osgeo/rgrass/issues/42</a>)).</p>
<p><img src="fig2_p7_RRASTER_GRASS.png" width="500"></p>
<p>From GDAL 3.5.0, the <code>RRASTER</code> driver also supports
WKT2_2019 CRS representations; in earlier versions of GDAL, the driver
only supported the proj-string representation (<a href="https://github.com/osgeo/rgrass/issues/51" class="external-link uri">https://github.com/osgeo/rgrass/issues/51</a>).</p>
<p>These changes mean that users transferring data between R and GRASS
will need to coerce between <strong>terra</strong> classes
<code>SpatVector</code> and <code>SpatRaster</code> and the class system
of choice. In addition, <code>SpatRaster</code> is only read into memory
from file when this is required, so requiring some care.</p>
</div>
<div class="section level2">
<h2 id="loading-and-attaching-packages">Loading and attaching packages<a class="anchor" aria-label="anchor" href="#loading-and-attaching-packages"></a>
</h2>
<p>This vignette is constructed conditioning on the availability of
aforementioned R packages, i.e. if some were missing at the time of
package building, some code blocks will not be displayed.</p>
<p>On loading and attaching, <strong>terra</strong> displays its
version:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="st"><a href="https://rspatial.org/" class="external-link">"terra"</a></span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## terra 1.8.5</span></span></code></pre>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="st"><a href="https://r-spatial.github.io/sf/" class="external-link">"sf"</a></span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Linking to GEOS 3.10.2, GDAL 3.4.1, PROJ 8.2.1; sf_use_s2() is TRUE</span></span></code></pre>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="st"><a href="https://github.com/edzer/sp/" class="external-link">"sp"</a></span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="st"><a href="https://r-spatial.github.io/stars/" class="external-link">"stars"</a></span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Loading required package: abind</span></span></code></pre>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="st"><a href="https://rspatial.org/raster" class="external-link">"raster"</a></span><span class="op">)</span></span></code></pre></div>
<p><code><a href="https://rspatial.github.io/terra/reference/gdal.html" class="external-link">terra::gdal()</a></code> tells us the versions of the external
libraries being used by <strong>terra</strong>:</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rspatial.github.io/terra/reference/gdal.html" class="external-link">gdal</a></span><span class="op">(</span>lib <span class="op">=</span> <span class="st">"all"</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">##     gdal     proj     geos </span></span>
<span><span class="co">##  "3.4.1"  "8.2.1" "3.10.2"</span></span></code></pre>
<p>When using CRAN binary packages built static for Windows and macOS,
the R packages will use the same versions of the external libraries, but
not necessarily the same versions as those against which GRASS was
installed.</p>
</div>
<div class="section level2">
<h2 id="spatvector-coercion">
<code>"SpatVector"</code> coercion<a class="anchor" aria-label="anchor" href="#spatvector-coercion"></a>
</h2>
<p>In the <strong>terra</strong> package <span class="citation">(Hijmans
2022b)</span>, vector data are held in <code>"SpatVector"</code>
objects. This means that when <code><a href="../reference/read_VECT.html">read_VECT()</a></code> is used, a
<code>"SpatVector"</code> object is returned, and the same class of
object is needed for <code><a href="../reference/read_VECT.html">write_VECT()</a></code> for writing to GRASS.</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">fv</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"ex/lux.shp"</span>, package <span class="op">=</span> <span class="st">"terra"</span><span class="op">)</span></span>
<span><span class="op">(</span><span class="va">v</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rspatial.github.io/terra/reference/vect.html" class="external-link">vect</a></span><span class="op">(</span><span class="va">fv</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">##  class       : SpatVector </span></span>
<span><span class="co">##  geometry    : polygons </span></span>
<span><span class="co">##  dimensions  : 12, 6  (geometries, attributes)</span></span>
<span><span class="co">##  extent      : 5.74414, 6.528252, 49.44781, 50.18162  (xmin, xmax, ymin, ymax)</span></span>
<span><span class="co">##  source      : lux.shp</span></span>
<span><span class="co">##  coord. ref. : lon/lat WGS 84 (EPSG:4326) </span></span>
<span><span class="co">##  names       :  ID_1   NAME_1  ID_2   NAME_2  AREA       POP</span></span>
<span><span class="co">##  type        : &lt;num&gt;    &lt;chr&gt; &lt;num&gt;    &lt;chr&gt; &lt;num&gt;     &lt;num&gt;</span></span>
<span><span class="co">##  values      :     1 Diekirch     1 Clervaux   312 1.808e+04</span></span>
<span><span class="co">##                    1 Diekirch     2 Diekirch   218 3.254e+04</span></span>
<span><span class="co">##                    1 Diekirch     3  Redange   259 1.866e+04</span></span></code></pre>
<p>These objects are always held in memory, so there is no
<code><a href="https://rspatial.github.io/terra/reference/sources.html" class="external-link">inMemory()</a></code> method:</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/try.html" class="external-link">try</a></span><span class="op">(</span><span class="fu"><a href="https://rspatial.github.io/terra/reference/sources.html" class="external-link">inMemory</a></span><span class="op">(</span><span class="va">v</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Error : unable to find an inherited method for function 'inMemory' for signature 'x = "SpatVector"'</span></span></code></pre>
<p>The coordinate reference system is expressed in WKT2-2019 form:</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="fu"><a href="https://rspatial.github.io/terra/reference/crs.html" class="external-link">crs</a></span><span class="op">(</span><span class="va">v</span><span class="op">)</span>, <span class="st">"\n"</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## GEOGCRS["WGS 84",</span></span>
<span><span class="co">##     DATUM["World Geodetic System 1984",</span></span>
<span><span class="co">##         ELLIPSOID["WGS 84",6378137,298.257223563,</span></span>
<span><span class="co">##             LENGTHUNIT["metre",1]]],</span></span>
<span><span class="co">##     PRIMEM["Greenwich",0,</span></span>
<span><span class="co">##         ANGLEUNIT["degree",0.0174532925199433]],</span></span>
<span><span class="co">##     CS[ellipsoidal,2],</span></span>
<span><span class="co">##         AXIS["geodetic latitude (Lat)",north,</span></span>
<span><span class="co">##             ORDER[1],</span></span>
<span><span class="co">##             ANGLEUNIT["degree",0.0174532925199433]],</span></span>
<span><span class="co">##         AXIS["geodetic longitude (Lon)",east,</span></span>
<span><span class="co">##             ORDER[2],</span></span>
<span><span class="co">##             ANGLEUNIT["degree",0.0174532925199433]],</span></span>
<span><span class="co">##     ID["EPSG",4326]]</span></span></code></pre>
<div class="section level3">
<h3 id="sf">
<code>"sf"</code><a class="anchor" aria-label="anchor" href="#sf"></a>
</h3>
<p>Most new work should use vector classes defined in the
<strong>sf</strong> package <span class="citation">(Pebesma 2022,
2018)</span>. In this case, coercion uses <code><a href="https://r-spatial.github.io/sf/reference/st_as_sf.html" class="external-link">st_as_sf()</a></code>:</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">v_sf</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_as_sf.html" class="external-link">st_as_sf</a></span><span class="op">(</span><span class="va">v</span><span class="op">)</span></span>
<span><span class="va">v_sf</span></span></code></pre></div>
<pre><code><span><span class="co">## Simple feature collection with 12 features and 6 fields</span></span>
<span><span class="co">## Geometry type: POLYGON</span></span>
<span><span class="co">## Dimension:     XY</span></span>
<span><span class="co">## Bounding box:  xmin: 5.74414 ymin: 49.44781 xmax: 6.528252 ymax: 50.18162</span></span>
<span><span class="co">## Geodetic CRS:  WGS 84</span></span>
<span><span class="co">## First 10 features:</span></span>
<span><span class="co">##    ID_1       NAME_1 ID_2           NAME_2 AREA    POP</span></span>
<span><span class="co">## 1     1     Diekirch    1         Clervaux  312  18081</span></span>
<span><span class="co">## 2     1     Diekirch    2         Diekirch  218  32543</span></span>
<span><span class="co">## 3     1     Diekirch    3          Redange  259  18664</span></span>
<span><span class="co">## 4     1     Diekirch    4          Vianden   76   5163</span></span>
<span><span class="co">## 5     1     Diekirch    5            Wiltz  263  16735</span></span>
<span><span class="co">## 6     2 Grevenmacher    6       Echternach  188  18899</span></span>
<span><span class="co">## 7     2 Grevenmacher    7           Remich  129  22366</span></span>
<span><span class="co">## 8     2 Grevenmacher   12     Grevenmacher  210  29828</span></span>
<span><span class="co">## 9     3   Luxembourg    8         Capellen  185  48187</span></span>
<span><span class="co">## 10    3   Luxembourg    9 Esch-sur-Alzette  251 176820</span></span>
<span><span class="co">##                          geometry</span></span>
<span><span class="co">## 1  POLYGON ((6.026519 50.17767...</span></span>
<span><span class="co">## 2  POLYGON ((6.178368 49.87682...</span></span>
<span><span class="co">## 3  POLYGON ((5.881378 49.87015...</span></span>
<span><span class="co">## 4  POLYGON ((6.131309 49.97256...</span></span>
<span><span class="co">## 5  POLYGON ((5.977929 50.02602...</span></span>
<span><span class="co">## 6  POLYGON ((6.385532 49.83703...</span></span>
<span><span class="co">## 7  POLYGON ((6.316665 49.62337...</span></span>
<span><span class="co">## 8  POLYGON ((6.425158 49.73164...</span></span>
<span><span class="co">## 9  POLYGON ((5.998312 49.69992...</span></span>
<span><span class="co">## 10 POLYGON ((6.039474 49.44826...</span></span></code></pre>
<p>and the <code><a href="https://rspatial.github.io/terra/reference/vect.html" class="external-link">vect()</a></code> method to get from <strong>sf</strong> to
<strong>terra</strong>:</p>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">v_sf_rt</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rspatial.github.io/terra/reference/vect.html" class="external-link">vect</a></span><span class="op">(</span><span class="va">v_sf</span><span class="op">)</span></span>
<span><span class="va">v_sf_rt</span></span></code></pre></div>
<pre><code><span><span class="co">##  class       : SpatVector </span></span>
<span><span class="co">##  geometry    : polygons </span></span>
<span><span class="co">##  dimensions  : 12, 6  (geometries, attributes)</span></span>
<span><span class="co">##  extent      : 5.74414, 6.528252, 49.44781, 50.18162  (xmin, xmax, ymin, ymax)</span></span>
<span><span class="co">##  coord. ref. : lon/lat WGS 84 (EPSG:4326) </span></span>
<span><span class="co">##  names       :  ID_1   NAME_1  ID_2   NAME_2  AREA       POP</span></span>
<span><span class="co">##  type        : &lt;num&gt;    &lt;chr&gt; &lt;num&gt;    &lt;chr&gt; &lt;num&gt;     &lt;num&gt;</span></span>
<span><span class="co">##  values      :     1 Diekirch     1 Clervaux   312 1.808e+04</span></span>
<span><span class="co">##                    1 Diekirch     2 Diekirch   218 3.254e+04</span></span>
<span><span class="co">##                    1 Diekirch     3  Redange   259 1.866e+04</span></span></code></pre>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rspatial.github.io/terra/reference/all.equal.html" class="external-link">all.equal</a></span><span class="op">(</span><span class="va">v_sf_rt</span>, <span class="va">v</span>, check.attributes <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## [1] TRUE</span></span></code></pre>
</div>
<div class="section level3">
<h3 id="spatial">
<code>"Spatial"</code><a class="anchor" aria-label="anchor" href="#spatial"></a>
</h3>
<p>To coerce to and from vector classes defined in the
<strong>sp</strong> package <span class="citation">(Roger S. Bivand,
Pebesma, and Gomez-Rubio 2013)</span>, methods in
<strong>raster</strong> are used as an intermediate step:</p>
<div class="sourceCode" id="cb23"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">v_sp</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/methods/as.html" class="external-link">as</a></span><span class="op">(</span><span class="va">v</span>, <span class="st">"Spatial"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="fu"><a href="https://rspatial.github.io/terra/reference/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">v_sp</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Object of class SpatialPolygonsDataFrame</span></span>
<span><span class="co">## Coordinates:</span></span>
<span><span class="co">##        min       max</span></span>
<span><span class="co">## x  5.74414  6.528252</span></span>
<span><span class="co">## y 49.44781 50.181622</span></span>
<span><span class="co">## Is projected: FALSE </span></span>
<span><span class="co">## proj4string : [+proj=longlat +datum=WGS84 +no_defs]</span></span>
<span><span class="co">## Data attributes:</span></span>
<span><span class="co">##       ID_1          NAME_1               ID_2          NAME_2         </span></span>
<span><span class="co">##  Min.   :1.000   Length:12          Min.   : 1.00   Length:12         </span></span>
<span><span class="co">##  1st Qu.:1.000   Class :character   1st Qu.: 3.75   Class :character  </span></span>
<span><span class="co">##  Median :2.000   Mode  :character   Median : 6.50   Mode  :character  </span></span>
<span><span class="co">##  Mean   :1.917                      Mean   : 6.50                     </span></span>
<span><span class="co">##  3rd Qu.:3.000                      3rd Qu.: 9.25                     </span></span>
<span><span class="co">##  Max.   :3.000                      Max.   :12.00                     </span></span>
<span><span class="co">##       AREA            POP        </span></span>
<span><span class="co">##  Min.   : 76.0   Min.   :  5163  </span></span>
<span><span class="co">##  1st Qu.:187.2   1st Qu.: 18518  </span></span>
<span><span class="co">##  Median :225.5   Median : 26097  </span></span>
<span><span class="co">##  Mean   :213.4   Mean   : 50167  </span></span>
<span><span class="co">##  3rd Qu.:253.0   3rd Qu.: 36454  </span></span>
<span><span class="co">##  Max.   :312.0   Max.   :182607</span></span></code></pre>
<div class="sourceCode" id="cb25"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">v_sp_rt</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rspatial.github.io/terra/reference/vect.html" class="external-link">vect</a></span><span class="op">(</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_as_sf.html" class="external-link">st_as_sf</a></span><span class="op">(</span><span class="va">v_sp</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rspatial.github.io/terra/reference/all.equal.html" class="external-link">all.equal</a></span><span class="op">(</span><span class="va">v_sp_rt</span>, <span class="va">v</span>, check.attributes <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## [1] TRUE</span></span></code></pre>
</div>
</div>
<div class="section level2">
<h2 id="spatraster-coercion">
<code>"SpatRaster"</code> coercion<a class="anchor" aria-label="anchor" href="#spatraster-coercion"></a>
</h2>
<p>In the <strong>terra</strong> package, raster data are held in
<code>"SpatRaster"</code> objects. This means that when
<code><a href="../reference/read_RAST.html">read_RAST()</a></code> is used, a <code>"SpatRaster"</code> object is
returned, and the same class of object is needed for
<code><a href="../reference/read_RAST.html">write_RAST()</a></code> for writing to GRASS.</p>
<div class="sourceCode" id="cb27"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">fr</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"ex/elev.tif"</span>, package <span class="op">=</span> <span class="st">"terra"</span><span class="op">)</span></span>
<span><span class="op">(</span><span class="va">r</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rspatial.github.io/terra/reference/rast.html" class="external-link">rast</a></span><span class="op">(</span><span class="va">fr</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## class       : SpatRaster </span></span>
<span><span class="co">## dimensions  : 90, 95, 1  (nrow, ncol, nlyr)</span></span>
<span><span class="co">## resolution  : 0.008333333, 0.008333333  (x, y)</span></span>
<span><span class="co">## extent      : 5.741667, 6.533333, 49.44167, 50.19167  (xmin, xmax, ymin, ymax)</span></span>
<span><span class="co">## coord. ref. : lon/lat WGS 84 (EPSG:4326) </span></span>
<span><span class="co">## source      : elev.tif </span></span>
<span><span class="co">## name        : elevation </span></span>
<span><span class="co">## min value   :       141 </span></span>
<span><span class="co">## max value   :       547</span></span></code></pre>
<p>In general, <code>"SpatRaster"</code> objects are files, rather than
data held in memory:</p>
<div class="sourceCode" id="cb29"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/try.html" class="external-link">try</a></span><span class="op">(</span><span class="fu"><a href="https://rspatial.github.io/terra/reference/sources.html" class="external-link">inMemory</a></span><span class="op">(</span><span class="va">r</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## [1] FALSE</span></span></code></pre>
<div class="section level3">
<h3 id="stars">
<code>"stars"</code><a class="anchor" aria-label="anchor" href="#stars"></a>
</h3>
<p>The <strong>stars</strong> package <span class="citation">(Pebesma
2021)</span> uses GDAL through <strong>sf</strong>. A coercion method is
provided from <code>"SpatRaster"</code> to <code>"stars"</code>:</p>
<div class="sourceCode" id="cb31"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">r_stars</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://r-spatial.github.io/stars/reference/st_as_stars.html" class="external-link">st_as_stars</a></span><span class="op">(</span><span class="va">r</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">r_stars</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## stars object with 2 dimensions and 1 attribute</span></span>
<span><span class="co">## attribute(s):</span></span>
<span><span class="co">##           Min. 1st Qu. Median     Mean 3rd Qu. Max. NA's</span></span>
<span><span class="co">## elev.tif   141     291    333 348.3366     406  547 3942</span></span>
<span><span class="co">## dimension(s):</span></span>
<span><span class="co">##   from to offset     delta refsys point x/y</span></span>
<span><span class="co">## x    1 95  5.742  0.008333 WGS 84 FALSE [x]</span></span>
<span><span class="co">## y    1 90  50.19 -0.008333 WGS 84 FALSE [y]</span></span></code></pre>
<p>which round-trips in memory.</p>
<div class="sourceCode" id="cb33"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="op">(</span><span class="va">r_stars_rt</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rspatial.github.io/terra/reference/rast.html" class="external-link">rast</a></span><span class="op">(</span><span class="va">r_stars</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## class       : SpatRaster </span></span>
<span><span class="co">## dimensions  : 90, 95, 1  (nrow, ncol, nlyr)</span></span>
<span><span class="co">## resolution  : 0.008333333, 0.008333333  (x, y)</span></span>
<span><span class="co">## extent      : 5.741667, 6.533333, 49.44167, 50.19167  (xmin, xmax, ymin, ymax)</span></span>
<span><span class="co">## coord. ref. : lon/lat WGS 84 (EPSG:4326) </span></span>
<span><span class="co">## source(s)   : memory</span></span>
<span><span class="co">## name        : elev.tif </span></span>
<span><span class="co">## min value   :      141 </span></span>
<span><span class="co">## max value   :      547</span></span></code></pre>
<p>When coercing to <code>"stars_proxy"</code> the same applies:</p>
<div class="sourceCode" id="cb35"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="op">(</span><span class="va">r_stars_p</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://r-spatial.github.io/stars/reference/st_as_stars.html" class="external-link">st_as_stars</a></span><span class="op">(</span><span class="va">r</span>, proxy <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## stars_proxy object with 1 attribute in 1 file(s):</span></span>
<span><span class="co">## $elev.tif</span></span>
<span><span class="co">## [1] "[...]/elev.tif"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## dimension(s):</span></span>
<span><span class="co">##   from to offset     delta refsys point x/y</span></span>
<span><span class="co">## x    1 95  5.742  0.008333 WGS 84 FALSE [x]</span></span>
<span><span class="co">## y    1 90  50.19 -0.008333 WGS 84 FALSE [y]</span></span></code></pre>
<p>with coercion from <code>"stars_proxy"</code> also not reading data
into memory:</p>
<div class="sourceCode" id="cb37"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="op">(</span><span class="va">r_stars_p_rt</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rspatial.github.io/terra/reference/rast.html" class="external-link">rast</a></span><span class="op">(</span><span class="va">r_stars_p</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## class       : SpatRaster </span></span>
<span><span class="co">## dimensions  : 90, 95, 1  (nrow, ncol, nlyr)</span></span>
<span><span class="co">## resolution  : 0.008333333, 0.008333333  (x, y)</span></span>
<span><span class="co">## extent      : 5.741667, 6.533333, 49.44167, 50.19167  (xmin, xmax, ymin, ymax)</span></span>
<span><span class="co">## coord. ref. : lon/lat WGS 84 (EPSG:4326) </span></span>
<span><span class="co">## source      : elev.tif </span></span>
<span><span class="co">## name        : elevation </span></span>
<span><span class="co">## min value   :       141 </span></span>
<span><span class="co">## max value   :       547</span></span></code></pre>
</div>
<div class="section level3">
<h3 id="rasterlayer">
<code>"RasterLayer"</code><a class="anchor" aria-label="anchor" href="#rasterlayer"></a>
</h3>
<p>From version 3.6-3 the <strong>raster</strong> package <span class="citation">(Hijmans 2022a)</span> uses <strong>terra</strong> for
all GDAL operations. Because of this, coercing a
<code>"SpatRaster"</code> object to a <code>"RasterLayer"</code> object
is simple:</p>
<div class="sourceCode" id="cb39"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="op">(</span><span class="va">r_RL</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/raster/man/raster.html" class="external-link">raster</a></span><span class="op">(</span><span class="va">r</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## class      : RasterLayer </span></span>
<span><span class="co">## dimensions : 90, 95, 8550  (nrow, ncol, ncell)</span></span>
<span><span class="co">## resolution : 0.008333333, 0.008333333  (x, y)</span></span>
<span><span class="co">## extent     : 5.741667, 6.533333, 49.44167, 50.19167  (xmin, xmax, ymin, ymax)</span></span>
<span><span class="co">## crs        : +proj=longlat +datum=WGS84 +no_defs </span></span>
<span><span class="co">## source     : elev.tif </span></span>
<span><span class="co">## names      : elevation </span></span>
<span><span class="co">## values     : 141, 547  (min, max)</span></span></code></pre>
<div class="sourceCode" id="cb41"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rspatial.github.io/terra/reference/sources.html" class="external-link">inMemory</a></span><span class="op">(</span><span class="va">r_RL</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## [1] FALSE</span></span></code></pre>
<p>The WKT2-2019 CRS representation is present but not shown by
default:</p>
<div class="sourceCode" id="cb43"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="fu"><a href="https://edzer.github.io/sp/reference/is.projected.html" class="external-link">wkt</a></span><span class="op">(</span><span class="va">r_RL</span><span class="op">)</span>, <span class="st">"\n"</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## GEOGCRS["unknown",</span></span>
<span><span class="co">##     DATUM["World Geodetic System 1984",</span></span>
<span><span class="co">##         ELLIPSOID["WGS 84",6378137,298.257223563,</span></span>
<span><span class="co">##             LENGTHUNIT["metre",1]],</span></span>
<span><span class="co">##         ID["EPSG",6326]],</span></span>
<span><span class="co">##     PRIMEM["Greenwich",0,</span></span>
<span><span class="co">##         ANGLEUNIT["degree",0.0174532925199433],</span></span>
<span><span class="co">##         ID["EPSG",8901]],</span></span>
<span><span class="co">##     CS[ellipsoidal,2],</span></span>
<span><span class="co">##         AXIS["longitude",east,</span></span>
<span><span class="co">##             ORDER[1],</span></span>
<span><span class="co">##             ANGLEUNIT["degree",0.0174532925199433,</span></span>
<span><span class="co">##                 ID["EPSG",9122]]],</span></span>
<span><span class="co">##         AXIS["latitude",north,</span></span>
<span><span class="co">##             ORDER[2],</span></span>
<span><span class="co">##             ANGLEUNIT["degree",0.0174532925199433,</span></span>
<span><span class="co">##                 ID["EPSG",9122]]]]</span></span></code></pre>
<p>This object (held on file rather than in memory) can be
round-tripped:</p>
<div class="sourceCode" id="cb45"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="op">(</span><span class="va">r_RL_rt</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rspatial.github.io/terra/reference/rast.html" class="external-link">rast</a></span><span class="op">(</span><span class="va">r_RL</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## class       : SpatRaster </span></span>
<span><span class="co">## dimensions  : 90, 95, 1  (nrow, ncol, nlyr)</span></span>
<span><span class="co">## resolution  : 0.008333333, 0.008333333  (x, y)</span></span>
<span><span class="co">## extent      : 5.741667, 6.533333, 49.44167, 50.19167  (xmin, xmax, ymin, ymax)</span></span>
<span><span class="co">## coord. ref. : +proj=longlat +datum=WGS84 +no_defs </span></span>
<span><span class="co">## source      : elev.tif </span></span>
<span><span class="co">## name        : elevation </span></span>
<span><span class="co">## min value   :       141 </span></span>
<span><span class="co">## max value   :       547</span></span></code></pre>
</div>
<div class="section level3">
<h3 id="spatial-1">
<code>"Spatial"</code><a class="anchor" aria-label="anchor" href="#spatial-1"></a>
</h3>
<p><code>"RasterLayer"</code> objects can be used for coercion from a
<code>"SpatRaster"</code> object to a
<code>"SpatialGridDataFrame"</code> object:</p>
<div class="sourceCode" id="cb47"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">r_sp_RL</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/methods/as.html" class="external-link">as</a></span><span class="op">(</span><span class="va">r_RL</span>, <span class="st">"SpatialGridDataFrame"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rspatial.github.io/terra/reference/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">r_sp_RL</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Object of class SpatialGridDataFrame</span></span>
<span><span class="co">## Coordinates:</span></span>
<span><span class="co">##          min       max</span></span>
<span><span class="co">## s1  5.741667  6.533333</span></span>
<span><span class="co">## s2 49.441667 50.191667</span></span>
<span><span class="co">## Is projected: FALSE </span></span>
<span><span class="co">## proj4string : [+proj=longlat +datum=WGS84 +no_defs]</span></span>
<span><span class="co">## Grid attributes:</span></span>
<span><span class="co">##    cellcentre.offset    cellsize cells.dim</span></span>
<span><span class="co">## s1          5.745833 0.008333333        95</span></span>
<span><span class="co">## s2         49.445833 0.008333333        90</span></span>
<span><span class="co">## Data attributes:</span></span>
<span><span class="co">##    elevation    </span></span>
<span><span class="co">##  Min.   :141.0  </span></span>
<span><span class="co">##  1st Qu.:291.0  </span></span>
<span><span class="co">##  Median :333.0  </span></span>
<span><span class="co">##  Mean   :348.3  </span></span>
<span><span class="co">##  3rd Qu.:406.0  </span></span>
<span><span class="co">##  Max.   :547.0  </span></span>
<span><span class="co">##  NA's   :3942</span></span></code></pre>
<p>The WKT2-2019 CRS representation is present but not shown by
default:</p>
<div class="sourceCode" id="cb49"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="fu"><a href="https://edzer.github.io/sp/reference/is.projected.html" class="external-link">wkt</a></span><span class="op">(</span><span class="va">r_sp_RL</span><span class="op">)</span>, <span class="st">"\n"</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## GEOGCRS["unknown",</span></span>
<span><span class="co">##     DATUM["World Geodetic System 1984",</span></span>
<span><span class="co">##         ELLIPSOID["WGS 84",6378137,298.257223563,</span></span>
<span><span class="co">##             LENGTHUNIT["metre",1]],</span></span>
<span><span class="co">##         ID["EPSG",6326]],</span></span>
<span><span class="co">##     PRIMEM["Greenwich",0,</span></span>
<span><span class="co">##         ANGLEUNIT["degree",0.0174532925199433],</span></span>
<span><span class="co">##         ID["EPSG",8901]],</span></span>
<span><span class="co">##     CS[ellipsoidal,2],</span></span>
<span><span class="co">##         AXIS["longitude",east,</span></span>
<span><span class="co">##             ORDER[1],</span></span>
<span><span class="co">##             ANGLEUNIT["degree",0.0174532925199433,</span></span>
<span><span class="co">##                 ID["EPSG",9122]]],</span></span>
<span><span class="co">##         AXIS["latitude",north,</span></span>
<span><span class="co">##             ORDER[2],</span></span>
<span><span class="co">##             ANGLEUNIT["degree",0.0174532925199433,</span></span>
<span><span class="co">##                 ID["EPSG",9122]]]]</span></span></code></pre>
<p>This object can be round-tripped, but use of <strong>raster</strong>
forefronts the Proj.4 string CRS representation:</p>
<div class="sourceCode" id="cb51"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="op">(</span><span class="va">r_sp_RL_rt</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/raster/man/raster.html" class="external-link">raster</a></span><span class="op">(</span><span class="va">r_sp_RL</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## class      : RasterLayer </span></span>
<span><span class="co">## dimensions : 90, 95, 8550  (nrow, ncol, ncell)</span></span>
<span><span class="co">## resolution : 0.008333333, 0.008333333  (x, y)</span></span>
<span><span class="co">## extent     : 5.741667, 6.533333, 49.44167, 50.19167  (xmin, xmax, ymin, ymax)</span></span>
<span><span class="co">## crs        : +proj=longlat +datum=WGS84 +no_defs </span></span>
<span><span class="co">## source     : memory</span></span>
<span><span class="co">## names      : elevation </span></span>
<span><span class="co">## values     : 141, 547  (min, max)</span></span></code></pre>
<div class="sourceCode" id="cb53"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="fu"><a href="https://edzer.github.io/sp/reference/is.projected.html" class="external-link">wkt</a></span><span class="op">(</span><span class="va">r_sp_RL_rt</span><span class="op">)</span>, <span class="st">"\n"</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## GEOGCRS["unknown",</span></span>
<span><span class="co">##     DATUM["World Geodetic System 1984",</span></span>
<span><span class="co">##         ELLIPSOID["WGS 84",6378137,298.257223563,</span></span>
<span><span class="co">##             LENGTHUNIT["metre",1]],</span></span>
<span><span class="co">##         ID["EPSG",6326]],</span></span>
<span><span class="co">##     PRIMEM["Greenwich",0,</span></span>
<span><span class="co">##         ANGLEUNIT["degree",0.0174532925199433],</span></span>
<span><span class="co">##         ID["EPSG",8901]],</span></span>
<span><span class="co">##     CS[ellipsoidal,2],</span></span>
<span><span class="co">##         AXIS["longitude",east,</span></span>
<span><span class="co">##             ORDER[1],</span></span>
<span><span class="co">##             ANGLEUNIT["degree",0.0174532925199433,</span></span>
<span><span class="co">##                 ID["EPSG",9122]]],</span></span>
<span><span class="co">##         AXIS["latitude",north,</span></span>
<span><span class="co">##             ORDER[2],</span></span>
<span><span class="co">##             ANGLEUNIT["degree",0.0174532925199433,</span></span>
<span><span class="co">##                 ID["EPSG",9122]]]]</span></span></code></pre>
<div class="sourceCode" id="cb55"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="op">(</span><span class="va">r_sp_rt</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rspatial.github.io/terra/reference/rast.html" class="external-link">rast</a></span><span class="op">(</span><span class="va">r_sp_RL_rt</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## class       : SpatRaster </span></span>
<span><span class="co">## dimensions  : 90, 95, 1  (nrow, ncol, nlyr)</span></span>
<span><span class="co">## resolution  : 0.008333333, 0.008333333  (x, y)</span></span>
<span><span class="co">## extent      : 5.741667, 6.533333, 49.44167, 50.19167  (xmin, xmax, ymin, ymax)</span></span>
<span><span class="co">## coord. ref. : +proj=longlat +datum=WGS84 +no_defs </span></span>
<span><span class="co">## source(s)   : memory</span></span>
<span><span class="co">## name        : elevation </span></span>
<span><span class="co">## min value   :       141 </span></span>
<span><span class="co">## max value   :       547</span></span></code></pre>
<div class="sourceCode" id="cb57"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rspatial.github.io/terra/reference/crs.html" class="external-link">crs</a></span><span class="op">(</span><span class="va">r_sp_RL_rt</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Coordinate Reference System:</span></span>
<span><span class="co">## Deprecated Proj.4 representation: +proj=longlat +datum=WGS84 +no_defs </span></span>
<span><span class="co">## WKT2 2019 representation:</span></span>
<span><span class="co">## GEOGCRS["unknown",</span></span>
<span><span class="co">##     DATUM["World Geodetic System 1984",</span></span>
<span><span class="co">##         ELLIPSOID["WGS 84",6378137,298.257223563,</span></span>
<span><span class="co">##             LENGTHUNIT["metre",1]],</span></span>
<span><span class="co">##         ID["EPSG",6326]],</span></span>
<span><span class="co">##     PRIMEM["Greenwich",0,</span></span>
<span><span class="co">##         ANGLEUNIT["degree",0.0174532925199433],</span></span>
<span><span class="co">##         ID["EPSG",8901]],</span></span>
<span><span class="co">##     CS[ellipsoidal,2],</span></span>
<span><span class="co">##         AXIS["longitude",east,</span></span>
<span><span class="co">##             ORDER[1],</span></span>
<span><span class="co">##             ANGLEUNIT["degree",0.0174532925199433,</span></span>
<span><span class="co">##                 ID["EPSG",9122]]],</span></span>
<span><span class="co">##         AXIS["latitude",north,</span></span>
<span><span class="co">##             ORDER[2],</span></span>
<span><span class="co">##             ANGLEUNIT["degree",0.0174532925199433,</span></span>
<span><span class="co">##                 ID["EPSG",9122]]]]</span></span></code></pre>
<p>Coercion to the <strong>sp</strong>
<code>"SpatialGridDataFrame"</code> representation is also provided by
<strong>stars</strong>:</p>
<div class="sourceCode" id="cb59"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">r_sp_stars</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/methods/as.html" class="external-link">as</a></span><span class="op">(</span><span class="va">r_stars</span>, <span class="st">"Spatial"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rspatial.github.io/terra/reference/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">r_sp_stars</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Object of class SpatialGridDataFrame</span></span>
<span><span class="co">## Coordinates:</span></span>
<span><span class="co">##         min       max</span></span>
<span><span class="co">## x  5.741667  6.533333</span></span>
<span><span class="co">## y 49.441667 50.191667</span></span>
<span><span class="co">## Is projected: FALSE </span></span>
<span><span class="co">## proj4string : [+proj=longlat +datum=WGS84 +no_defs]</span></span>
<span><span class="co">## Grid attributes:</span></span>
<span><span class="co">##   cellcentre.offset    cellsize cells.dim</span></span>
<span><span class="co">## x          5.745833 0.008333333        95</span></span>
<span><span class="co">## y         49.445833 0.008333333        90</span></span>
<span><span class="co">## Data attributes:</span></span>
<span><span class="co">##     elev.tif    </span></span>
<span><span class="co">##  Min.   :141.0  </span></span>
<span><span class="co">##  1st Qu.:291.0  </span></span>
<span><span class="co">##  Median :333.0  </span></span>
<span><span class="co">##  Mean   :348.3  </span></span>
<span><span class="co">##  3rd Qu.:406.0  </span></span>
<span><span class="co">##  Max.   :547.0  </span></span>
<span><span class="co">##  NA's   :3942</span></span></code></pre>
<div class="sourceCode" id="cb61"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="fu"><a href="https://edzer.github.io/sp/reference/is.projected.html" class="external-link">wkt</a></span><span class="op">(</span><span class="va">r_sp_stars</span><span class="op">)</span>, <span class="st">"\n"</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## GEOGCRS["WGS 84",</span></span>
<span><span class="co">##     DATUM["World Geodetic System 1984",</span></span>
<span><span class="co">##         ELLIPSOID["WGS 84",6378137,298.257223563,</span></span>
<span><span class="co">##             LENGTHUNIT["metre",1]]],</span></span>
<span><span class="co">##     PRIMEM["Greenwich",0,</span></span>
<span><span class="co">##         ANGLEUNIT["degree",0.0174532925199433]],</span></span>
<span><span class="co">##     CS[ellipsoidal,2],</span></span>
<span><span class="co">##         AXIS["geodetic latitude (Lat)",north,</span></span>
<span><span class="co">##             ORDER[1],</span></span>
<span><span class="co">##             ANGLEUNIT["degree",0.0174532925199433]],</span></span>
<span><span class="co">##         AXIS["geodetic longitude (Lon)",east,</span></span>
<span><span class="co">##             ORDER[2],</span></span>
<span><span class="co">##             ANGLEUNIT["degree",0.0174532925199433]],</span></span>
<span><span class="co">##     ID["EPSG",4326]]</span></span></code></pre>
<p>and can be round-tripped:</p>
<div class="sourceCode" id="cb63"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="op">(</span><span class="va">r_sp_stars_rt</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rspatial.github.io/terra/reference/rast.html" class="external-link">rast</a></span><span class="op">(</span><span class="fu"><a href="https://r-spatial.github.io/stars/reference/st_as_stars.html" class="external-link">st_as_stars</a></span><span class="op">(</span><span class="va">r_sp_stars</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## class       : SpatRaster </span></span>
<span><span class="co">## dimensions  : 90, 95, 1  (nrow, ncol, nlyr)</span></span>
<span><span class="co">## resolution  : 0.008333333, 0.008333333  (x, y)</span></span>
<span><span class="co">## extent      : 5.741667, 6.533333, 49.44167, 50.19167  (xmin, xmax, ymin, ymax)</span></span>
<span><span class="co">## coord. ref. : lon/lat WGS 84 (EPSG:4326) </span></span>
<span><span class="co">## source(s)   : memory</span></span>
<span><span class="co">## name        : elev.tif </span></span>
<span><span class="co">## min value   :      141 </span></span>
<span><span class="co">## max value   :      547</span></span></code></pre>
<p>``</p>
<div class="sourceCode" id="cb65"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="fu"><a href="https://rspatial.github.io/terra/reference/crs.html" class="external-link">crs</a></span><span class="op">(</span><span class="va">r_sp_rt</span><span class="op">)</span>, <span class="st">"\n"</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## GEOGCRS["unknown",</span></span>
<span><span class="co">##     DATUM["World Geodetic System 1984",</span></span>
<span><span class="co">##         ELLIPSOID["WGS 84",6378137,298.257223563,</span></span>
<span><span class="co">##             LENGTHUNIT["metre",1]],</span></span>
<span><span class="co">##         ID["EPSG",6326]],</span></span>
<span><span class="co">##     PRIMEM["Greenwich",0,</span></span>
<span><span class="co">##         ANGLEUNIT["degree",0.0174532925199433],</span></span>
<span><span class="co">##         ID["EPSG",8901]],</span></span>
<span><span class="co">##     CS[ellipsoidal,2],</span></span>
<span><span class="co">##         AXIS["longitude",east,</span></span>
<span><span class="co">##             ORDER[1],</span></span>
<span><span class="co">##             ANGLEUNIT["degree",0.0174532925199433,</span></span>
<span><span class="co">##                 ID["EPSG",9122]]],</span></span>
<span><span class="co">##         AXIS["latitude",north,</span></span>
<span><span class="co">##             ORDER[2],</span></span>
<span><span class="co">##             ANGLEUNIT["degree",0.0174532925199433,</span></span>
<span><span class="co">##                 ID["EPSG",9122]]]]</span></span></code></pre>
</div>
</div>
<div class="section level2 unnumbered">
<h2 class="unnumbered" id="references">References<a class="anchor" aria-label="anchor" href="#references"></a>
</h2>
<div id="refs" class="references csl-bib-body hanging-indent" entry-spacing="0">
<div id="ref-bivand:00" class="csl-entry">
Bivand, R. S. 2000. <span>“Using the <span>R</span> Statistical Data
Analysis Language on <span>GRASS</span> 5.0 <span>GIS</span> Data Base
Files.”</span> <em>Computers and Geosciences</em> 26: 1043–52.
</div>
<div id="ref-asdar" class="csl-entry">
Bivand, Roger S., Edzer Pebesma, and Virgilio Gomez-Rubio. 2013.
<em>Applied Spatial Data Analysis with <span>R</span>, Second
Edition</em>. Springer, NY. <a href="https://asdar-book.org/" class="external-link">https://asdar-book.org/</a>.
</div>
<div id="ref-raster" class="csl-entry">
Hijmans, Robert J. 2022a. <em><span class="nocase">raster</span>:
Geographic Data Analysis and Modeling</em>. <a href="https://cran.r-project.org/package=raster" class="external-link">https://cran.r-project.org/package=raster</a>.
</div>
<div id="ref-terra" class="csl-entry">
———. 2022b. <em><span class="nocase">terra</span>: Spatial Data
Analysis</em>. <a href="https://cran.r-project.org/package=terra" class="external-link">https://cran.r-project.org/package=terra</a>.
</div>
<div id="ref-neteler+mitasova:08" class="csl-entry">
Neteler, M., and H. Mitasova. 2008. <em>Open Source <span>GIS</span>: A
<span>GRASS</span> <span>GIS</span> Approach, Third Edition</em>. New
York: Springer.
</div>
<div id="ref-sf-rj" class="csl-entry">
Pebesma, Edzer. 2018. <span>“<span class="nocase">Simple Features for
<span>R</span>: Standardized Support for Spatial Vector
Data</span>.”</span> <em><span>The R Journal</span></em> 10 (1): 439–46.
<a href="https://doi.org/10.32614/RJ-2018-009" class="external-link">https://doi.org/10.32614/RJ-2018-009</a>.
</div>
<div id="ref-stars" class="csl-entry">
———. 2021. <em><span class="nocase">stars</span>: Spatiotemporal Arrays,
Raster and Vector Data Cubes</em>. <a href="https://CRAN.R-project.org/package=stars" class="external-link">https://CRAN.R-project.org/package=stars</a>.
</div>
<div id="ref-sf" class="csl-entry">
———. 2022. <em><span class="nocase">sf</span>: Simple Features for
<span>R</span></em>. <a href="https://cran.r-project.org/package=sf" class="external-link">https://cran.r-project.org/package=sf</a>.
</div>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Roger Bivand, Steven Pawley.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer>
</div>





  </body>
</html>
